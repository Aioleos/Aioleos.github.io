# 迅雷下载宝刷固件之旅

## 一、由来
之前买了一个迅雷下载宝，挂机下载，又不费电，还是挺好用的，但是最近经常出现下载器不在线的问题，就想刷刷别人定制的固件，找了两个，一个是[【小白教程】迅雷下载宝刷H大的Padavan教程](http://www.right.com.cn/forum/thread-200183-1-1.html)，另一个是[【满血复活】迅雷下载宝定制固件（Luci+NFS+PT+Aria2+FTP+Ngrok+远程挂载NAS或硬盘 ](http://www.right.com.cn/forum/forum.php?mod=viewthread&tid=186873&page=1&authorid=307731)。前一个是Padavan固件，后一个是利用sd卡外挂optware运行环境，所以后一个还是可以保留原生的迅雷下载宝功能，而前一个会覆盖掉原生功能。考虑到有时迅雷下载宝的下载速度还是很可观的，就使用了后一个固件。这两个固件我只尝试了后一个，我估计最大的区别还是后一个用sd卡实现外挂增加了很多功能，而前一个就是直接将固件刷入下载包的rom中，当然二者的界面也是很不相同，功能上也有一些差异，但是对于下载宝来说，主要的下载功能两者都具备了。
下面，就开始记录一下我刷后一个固件的操作，当然这些操作都是看的这个教程[【满血复活】迅雷下载宝定制固件（Luci+NFS+PT+Aria2+FTP+Ngrok+远程挂载NAS或硬盘 ](http://www.right.com.cn/forum/forum.php?mod=viewthread&tid=186873&page=1&authorid=307731)。

## 二、刷Bootloader
如果之前刷过别的Bootloader，比如刷了breed的，必须将Bootloader刷回官方的uboot，如果没有刷过其他的Bootloader，就不用操作这一步。具体的恢复uboot的方法，我没有具体操作，需要的朋友就直接参考上面的教程吧！

## 三、升级迅雷下载宝固件
这个固件是迅雷官方的固件，不是第三方的固件，这里的升级也不会带来第三方功能的增加，如果不需要第三方功能，也可以只升级迅雷下载宝本身的固件。
[链接](https://pan.baidu.com/s/1pNokoKb)，密码：i4js
在百度网盘上下载好需要用的固件，将整个文件夹都下载到本地。
升级方法：
在浏览器登录以下地址（确保浏览器所在的电脑与下载宝在同一路由环境下），`http://下载宝IP:81/upgrade.do`，这里的“下载宝IP”是在局域网内路由器自动分配给下载宝的ip地址，可以在迅雷下载宝的手机App中查到。登录之后，操作很简单，可以看到一个“选择文件”的按键和一个“Apply”的按键，首先点击“选择文件”选择上面下载的固件fw-7621-xiazaibao-338.171012.bin这个文件，然后点击“Apply”。等待升级完成。

## 四、刷入外挂功能
将上面下载的文件中的rom.tar直接拷贝到sd卡中。不需要解压，直接拷贝就行。将sd卡插入下载宝，等待刷入固件。

## 五、登录luci界面
刷入以上第四步的第三方固件后，就可以登录Luci界面使用第三方功能，登录以下地址就可以登录到luci界面，`http://下载宝IP`，这里的“下载宝IP”与第三步中的是一样的。
目前我只使用了aria2功能，其他的功能还没有尝试过。
aria2功能也就是下载功能，可以实现http。bt，磁力，ftp等下载功能。aria2的服务端程序已经集成在了该第三方固件中，只需要在aria2服务中进行一下配置就可以使用。
具体的配置就是设置token用于加密，就相当于使用账号密码登录服务一样。然后更新一下tracker列表，可以使用[tracker链接](https://github.com/ngosang/trackerslist)中的tracker中的列表，最后勾选“启动”，然后保存并应用就可以了。

## 六、登录aria2管理界面
登录aria2的管理界面用来管理下载操作，就是添加下载链接、文件进行下载管理的界面，这里使用![Aria2 Web 控制台](http://aria2c.com/)进行管理。在设置（一个长得像扳手的图标）中，
JSON-RPC Path设置为这样的格式`http://token:xxx@下载宝IP:6800/jsonrpc`，其中token后面的xxx表示你在luci界面中设置的token值。然后就可以愉快的下载了。
